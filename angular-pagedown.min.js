var mdExtraOptions={extensions:"all",table_class:"table"};angular.module("ui.pagedown",[]).directive("pagedownEditor",["$compile","$timeout","$window","$q",function(n,e,t,i){var o=0,r=Markdown.getSanitizingConverter();return Markdown.Extra.init(r,mdExtraOptions),r.hooks.chain("preBlockGamut",function(n,e){return n.replace(/^ {0,3}""" *\n((?:.*?\n)+?) {0,3}""" *$/gm,function(n,t){return"<blockquote>"+e(t)+"</blockquote>\n"})}),{restrict:"E",scope:{content:"=",placeholder:"@",showPreview:"@",help:"&",insertImage:"&"},link:function(a,d,l){var c;c=null==l.id?o++:l.id;var u="false"==a.showPreview?"display: none;":"",s=void 0!==l.placeholder?l.placeholder:"",p=n('<div><div class="wmd-panel"><div id="wmd-button-bar-'+c+'"></div><textarea class="wmd-input" id="wmd-input-'+c+'" ng-model="content" placeholder="'+s+'"></textarea></div><div id="wmd-preview-'+c+'" class="pagedown-preview wmd-panel wmd-preview" style="'+u+'"></div></div>')(a);d.append(p);var w=angular.isFunction(a.help)?a.help:function(){t.open("http://daringfireball.net/projects/markdown/syntax","_blank")},v=new Markdown.Editor(r,"-"+c,{handler:w}),m=angular.element(document.getElementById("wmd-input-"+c));"false"!=a.showPreview&&a.$watch("content",function(){v.refreshPreview()}),v.hooks.chain("onPreviewRefresh",function(){e(function(){a.content=m.val()})}),angular.isFunction(a.insertImage)&&v.hooks.set("insertImageDialog",function(n){var t=a.insertImage();return e(function(){t?i.when(t).then(function(e){n(e)},function(e){n(null)}):n(null)}),!0}),v.run()}}}]).directive("pagedownViewer",["$compile","$sce",function(n,e){var t=Markdown.getSanitizingConverter();return Markdown.Extra.init(t,mdExtraOptions),{restrict:"E",scope:{content:"="},link:function(i,o,r){var a,d=function(){return!i||(void 0==i.content||null==i.content)&&a?void a():void(i.sanitizedContent=e.trustAsHtml(t.makeHtml(i.content)))};a=i.$watch("content",d),d();var l="<pre ng-bind-html='sanitizedContent'></pre>",c=n(l)(i);o.append(c)}}}]);