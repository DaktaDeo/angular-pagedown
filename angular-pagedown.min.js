var mdExtraOptions={extensions:"all",table_class:"table"};angular.module("ui.pagedown",[]).directive("pagedownEditor",["$compile","$timeout","$window","$q",function(a,b,c,d){var e=0,f=Markdown.getSanitizingConverter();return Markdown.Extra.init(f,mdExtraOptions),f.hooks.chain("preBlockGamut",function(a,b){return a.replace(/^ {0,3}""" *\n((?:.*?\n)+?) {0,3}""" *$/gm,function(a,c){return"<blockquote>"+b(c)+"</blockquote>\n"})}),{restrict:"E",scope:{content:"=",placeholder:"@",showPreview:"@",help:"&",insertImage:"&",editorClass:"=",editorRows:"@",previewClass:"=",previewContent:"="},link:function(g,h,i){var j;j=null==i.id?e++:i.id;var k="false"==g.showPreview?"display: none;":"",l=i.placeholder||"",m=i.editorRows||"10",n=a('<div><div class="wmd-panel"><div id="wmd-button-bar-'+j+'"></div>'+'<textarea id="wmd-input-'+j+'" placeholder="'+l+'" ng-model="content"'+' rows="'+m+'" '+(g.editorClass?'ng-class="editorClass"':'class="wmd-input"')+">"+"</textarea>"+"</div>"+'<div id="wmd-preview-'+j+'" style="'+k+'"'+" "+(g.previewClass?'ng-class="previewClass"':'class="wmd-panel wmd-preview"')+">"+"</div>"+"</div>")(g);h.append(n);var o=angular.isFunction(g.help)?g.help:function(){c.open("http://daringfireball.net/projects/markdown/syntax","_blank")},p=new Markdown.Editor(f,"-"+j,{handler:o});f.hooks.chain("postConversion",function(a){g.previewContent=a});var q=angular.element(document.getElementById("wmd-input-"+j));"false"!=g.showPreview&&g.$watch("content",function(){p.refreshPreview()}),p.hooks.chain("onPreviewRefresh",function(){b(function(){g.content=q.val()})}),angular.isFunction(g.insertImage)&&p.hooks.set("insertImageDialog",function(a){var c=g.insertImage();return b(function(){c?d.when(c).then(function(b){a(b)},function(){a(null)}):a(null)}),!0}),p.run()}}}]).directive("pagedownViewer",["$compile","$sce",function(a,b){var c=Markdown.getSanitizingConverter();return Markdown.Extra.init(c,mdExtraOptions),{restrict:"E",scope:{content:"="},link:function(d,e){var g=function(){return d.content?(d.sanitizedContent=b.trustAsHtml(c.makeHtml(d.content)),void 0):(d.sanitizedContent="",void 0)};d.$watch("content",g),g();var h="<p ng-bind-html='sanitizedContent'></p>",i=a(h)(d);e.append(i)}}}]);