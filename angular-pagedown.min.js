var mdExtraOptions={extensions:"all",table_class:"table"};angular.module("ui.pagedown",[]).directive("pagedownEditor",["$compile","$timeout","$window","$q",function(a,b,c,d){var e=0,f=Markdown.getSanitizingConverter();return Markdown.Extra.init(f,mdExtraOptions),f.hooks.chain("preBlockGamut",function(a,b){return a.replace(/^ {0,3}""" *\n((?:.*?\n)+?) {0,3}""" *$/gm,function(a,c){return"<blockquote>"+b(c)+"</blockquote>\n"})}),{restrict:"E",scope:{content:"=",placeholder:"@",showPreview:"@",help:"&",insertImage:"&"},link:function(g,h,i){var j;j=null==i.id?e++:i.id;var k="false"==g.showPreview?"display: none;":"",l=void 0!==i.placeholder?i.placeholder:"",m=a('<div><div class="wmd-panel"><div id="wmd-button-bar-'+j+'"></div><textarea class="wmd-input" id="wmd-input-'+j+'" ng-model="content" placeholder="'+l+'"></textarea></div><div id="wmd-preview-'+j+'" class="pagedown-preview wmd-panel wmd-preview" style="'+k+'"></div></div>')(g);h.append(m);var n=angular.isFunction(g.help)?g.help:function(){c.open("http://daringfireball.net/projects/markdown/syntax","_blank")},o=new Markdown.Editor(f,"-"+j,{handler:n}),p=angular.element(document.getElementById("wmd-input-"+j));"false"!=g.showPreview&&g.$watch("content",function(){o.refreshPreview()}),o.hooks.chain("onPreviewRefresh",function(){b(function(){g.content=p.val()})}),angular.isFunction(g.insertImage)&&o.hooks.set("insertImageDialog",function(a){var c=g.insertImage();return b(function(){c?d.when(c).then(function(b){a(b)},function(b){a(null)}):a(null)}),!0}),o.run()}}}]).directive("pagedownViewer",["$compile","$sce",function(a,b){var c=Markdown.getSanitizingConverter();return Markdown.Extra.init(c,mdExtraOptions),{restrict:"E",scope:{content:"="},link:function(d,e,f){var g,h=function(){return!d||(void 0==d.content||null==d.content)&&g?void g():void(d.sanitizedContent=b.trustAsHtml(c.makeHtml(d.content)))};g=d.$watch("content",h),h();var i="<p ng-bind-html='sanitizedContent'></p>",j=a(i)(d);e.append(j)}}}]);